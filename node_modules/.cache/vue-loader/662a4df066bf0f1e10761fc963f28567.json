{"remainingRequest":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cyding/speedle-ui/src/components/PolicyTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cyding/speedle-ui/src/components/PolicyTable.vue","mtime":1595067742716},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1BvbGljeVRhYmxlJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmllbGRzOiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnZWZmZWN0JywKICAgICAgICAgIGxhYmVsOiAnRWZmZWN0JywKICAgICAgICAgIGZvcm1hdHRlcjogKHZhbHVlKSA9PiB2YWx1ZS50b1VwcGVyQ2FzZSgpLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAncHJpbmNpcGFscycsCiAgICAgICAgICBsYWJlbDogJ1ByaW5jaXBhbHMnLAogICAgICAgICAgLy8gZm9ybWF0dGVyOiAncHJpbmNpcGFsc1RvU3RyaW5nJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogJ3Blcm1pc3Npb25zJywKICAgICAgICAgIGxhYmVsOiAnUGVybWlzc2lvbnMnLAogICAgICAgICAgZm9ybWF0dGVyOiAncGVybWlzc2lvbnNUb1N0cmluZycsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICdjb25kaXRpb24nLAogICAgICAgICAgbGFiZWw6ICdDb25kaXRpb24nLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAnb3BlcmF0aW9uJywKICAgICAgICB9LAogICAgICBdLAogICAgICBwb2xpY2llczogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAxLAogICAgICAgICAgZWZmZWN0OiAnZ3JhbnQnLAogICAgICAgICAgcHJpbmNpcGFsczogW3sgdHlwZTogJ3VzZXInLCBuYW1lOiAndXNlcjEnIH1dLAogICAgICAgICAgcGVybWlzc2lvbnM6IFt7IGFjdGlvbnM6IFsncmVhZCcsICd3cml0ZSddLCByZXNvdXJjZTogJ2Jvb2sxJyB9XSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAyLAogICAgICAgICAgZWZmZWN0OiAnZ3JhbnQnLAogICAgICAgICAgcHJpbmNpcGFsczogW3sgdHlwZTogJ3VzZXInLCBuYW1lOiAndXNlcjEnIH0sIHsgdHlwZTogJ3JvbGUnLCBuYW1lOiAncm9sZTEnIH1dLAogICAgICAgICAgcGVybWlzc2lvbnM6IFt7IGFjdGlvbnM6IFsncmVhZCddLCByZXNvdXJjZTogJ2Jvb2sxJyB9XSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAzLAogICAgICAgICAgZWZmZWN0OiAnZ3JhbnQnLAogICAgICAgICAgcHJpbmNpcGFsczogW3sgdHlwZTogJ3VzZXInLCBuYW1lOiAndXNlcjEnIH1dLAogICAgICAgICAgcGVybWlzc2lvbnM6IFt7IGFjdGlvbnM6IFsncmVhZCddLCByZXNvdXJjZTogJ2Jvb2sxJyB9LCB7IGFjdGlvbnM6IFsnd3JpdGUnXSwgcmVzb3VyY2U6ICdib29rMScgfV0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBwcmluY2lwYWxzVG9TdHJpbmcodmFsdWUpIHsKICAgICAgbGV0IHJlcyA9ICcnOwogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgKICAgICAgZm9yIChjb25zdCBwIG9mIHZhbHVlKSB7CiAgICAgICAgcmVzICs9IGAke3AudHlwZX06JHtwLm5hbWV9YDsKICAgICAgICAvLyByZXMuCiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH0sCiAgICBwZXJtaXNzaW9uc1RvU3RyaW5nKHZhbHVlKSB7CiAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgKICAgICAgZm9yIChjb25zdCBwIG9mIHZhbHVlKSB7CiAgICAgICAgbGV0IGFjdHMgPSAnJzsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgKICAgICAgICBmb3IgKGNvbnN0IGEgb2YgcC5hY3Rpb25zKSB7CiAgICAgICAgICBpZiAoYWN0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGFjdHMgKz0gJywnOwogICAgICAgICAgfQogICAgICAgICAgYWN0cyArPSBhOwogICAgICAgIH0KICAgICAgICByZXMucHVzaCh7IGFjdGlvbnM6IGFjdHMsIHJlc291cmNlOiBwLnJlc291cmNlIH0pOwogICAgICAgIC8vIHJlcyArPSBgJHtwLmFjdGlvbn06JHtwLnJlc291cmNlfWA7CiAgICAgICAgLy8gcmVzLgogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9LAogICAgcmVtb3ZlUG9saWN5KGlkVG9SZW1vdmUpIHsKICAgICAgdGhpcy5wb2xpY2llcyA9IHRoaXMucG9saWNpZXMuZmlsdGVyKChwb2xpY3kpID0+IHBvbGljeS5pZCAhPT0gaWRUb1JlbW92ZSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["PolicyTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PolicyTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <b-table hover small responsive head-variant=\"light\"\n   :fields=\"fields\" :items=\"policies\">\n    <template v-slot:cell(operation)=\"data\">\n      <b-button pill variant=\"outline-danger\" size=\"sm\"\n        @click=\"removePolicy(data.item.id)\">\n      <b-icon icon=\"trash\" aria-hidden=\"true\"></b-icon>\n      </b-button>\n    </template>\n    <template v-slot:cell(principals)=\"data\">\n      <ul class=\"list-unstyled\">\n        <li v-for=\"principal in data.value\" :key=\"principal.type\">\n          {{ principal.type }} : {{ principal.name }}\n        </li>\n      </ul>\n    </template>\n    <template v-slot:cell(permissions)=\"data\">\n      <ul class=\"list-unstyled\">\n        <li v-for=\"permission in data.value\" :key=\"permission.resource\">\n          {{ permission.actions }} : {{ permission.resource }}\n        </li>\n      </ul>\n    </template>\n  </b-table>\n</div>\n</template>\n\n<script>\n\nexport default {\n  name: 'PolicyTable',\n  data() {\n    return {\n      fields: [\n        {\n          key: 'effect',\n          label: 'Effect',\n          formatter: (value) => value.toUpperCase(),\n        },\n        {\n          key: 'principals',\n          label: 'Principals',\n          // formatter: 'principalsToString',\n        },\n        {\n          key: 'permissions',\n          label: 'Permissions',\n          formatter: 'permissionsToString',\n        },\n        {\n          key: 'condition',\n          label: 'Condition',\n        },\n        {\n          key: 'operation',\n        },\n      ],\n      policies: [\n        {\n          id: 1,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }],\n          permissions: [{ actions: ['read', 'write'], resource: 'book1' }],\n        },\n        {\n          id: 2,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }, { type: 'role', name: 'role1' }],\n          permissions: [{ actions: ['read'], resource: 'book1' }],\n        },\n        {\n          id: 3,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }],\n          permissions: [{ actions: ['read'], resource: 'book1' }, { actions: ['write'], resource: 'book1' }],\n        },\n      ],\n    };\n  },\n  methods: {\n    principalsToString(value) {\n      let res = '';\n      // eslint-disable-next-line no-restricted-syntax\n      for (const p of value) {\n        res += `${p.type}:${p.name}`;\n        // res.\n      }\n      return res;\n    },\n    permissionsToString(value) {\n      const res = [];\n      // eslint-disable-next-line no-restricted-syntax\n      for (const p of value) {\n        let acts = '';\n        // eslint-disable-next-line no-restricted-syntax\n        for (const a of p.actions) {\n          if (acts.length > 0) {\n            acts += ',';\n          }\n          acts += a;\n        }\n        res.push({ actions: acts, resource: p.resource });\n        // res += `${p.action}:${p.resource}`;\n        // res.\n      }\n      return res;\n    },\n    removePolicy(idToRemove) {\n      this.policies = this.policies.filter((policy) => policy.id !== idToRemove);\n    },\n  },\n};\n</script>\n"]}]}