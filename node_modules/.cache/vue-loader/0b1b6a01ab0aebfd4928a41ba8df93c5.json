{"remainingRequest":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cyding/speedle-ui/src/components/Policies.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cyding/speedle-ui/src/components/Policies.vue","mtime":1596336694976},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOZXdQb2xpY3kgZnJvbSAnLi9OZXdQb2xpY3kudnVlJzsKaW1wb3J0IFBvbGljeVRhYmxlIGZyb20gJy4vUG9saWN5VGFibGUudnVlJzsKaW1wb3J0IE5ld1JvbGVQb2xpY3kgZnJvbSAnLi9OZXdSb2xlUG9saWN5LnZ1ZSc7CmltcG9ydCBSb2xlUG9saWN5VGFibGUgZnJvbSAnLi9Sb2xlUG9saWN5VGFibGUudnVlJzsKCi8vIGxldCBuZXh0SUQgPSAzOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1BvbGljaWVzJywKICBjb21wb25lbnRzOiB7CiAgICBOZXdQb2xpY3ksIFBvbGljeVRhYmxlLCBOZXdSb2xlUG9saWN5LCBSb2xlUG9saWN5VGFibGUsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcG9saWNpZXM6IFtdLAogICAgICByb2xlUG9saWNpZXM6IFtdLAogICAgICBuZXdQb2xpY3k6IHsKICAgICAgICBlZmZlY3Q6ICcnLAogICAgICAgIHByaW5jaXBhbHM6IFtdLAogICAgICAgIHBlcm1pc3Npb25zOiBbXSwKICAgICAgICBjb25kaXRpb246ICcnLAogICAgICB9LAogICAgICBuZXdQb2xpY3lBbmRQcmluY2lwYWw6IFt7CiAgICAgICAgaWQ6IDAsCiAgICAgICAgdHlwZTogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgIH1dLAogICAgICBuZXdQb2xpY3lQZXJtaXNzaW9uOiB7CiAgICAgICAgYWN0aW9uOiAnJywKICAgICAgICByZXNvdXJjZTogJycsCiAgICAgIH0sCiAgICAgIG5ld1BvbGljeVZpc2libGU6IGZhbHNlLAoKICAgICAgbmV3Um9sZVBvbGljeTogewogICAgICAgIGVmZmVjdDogJycsCiAgICAgICAgcHJpbmNpcGFsczogW10sCiAgICAgICAgcm9sZXM6IFtdLAogICAgICAgIHJlc291cmNlczogW10sCiAgICAgICAgY29uZGl0aW9uOiAnJywKICAgICAgfSwKICAgICAgbmV3Um9sZVBvbGljeVZpc2libGU6IGZhbHNlLAogICAgICBuZXdSb2xlUG9saWN5UHJpbmNpcGFsOiB7CiAgICAgICAgdHlwZTogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgIH0sCiAgICAgIG5ld1JvbGVQb2xpY3lSb2xlOiAnJywKICAgICAgbmV3Um9sZVBvbGljeVJlc291cmNlOiAnJywKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgc3ZjTmFtZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnN2Y05hbWU7CiAgICB9LAogICAgcG1zRW5kcG9pbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wbXNFbmRwb2ludDsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgc3ZjTmFtZShuZXdWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCAhPT0gJycpIHsKICAgICAgICB0aGlzLnJlc2V0TmV3UG9saWN5RGF0YSgpOwogICAgICAgIHRoaXMuYXhpb3MuZ2V0KGAke3RoaXMucG1zRW5kcG9pbnR9L3NlcnZpY2UvJHtuZXdWYWx9L3BvbGljeWApLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgIHRoaXMucG9saWNpZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2Uuc3RhdHVzKTsKICAgICAgICAgIHRoaXMucG9saWNpZXMgPSBbXTsKICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoJ0ZhaWwgdG8gZ2V0IHBvbGljaWVzJywgewogICAgICAgICAgICB0aXRsZTogYCR7ZXJyLnJlc3BvbnNlLnN0YXR1c31gLAogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmF4aW9zLmdldChgJHt0aGlzLnBtc0VuZHBvaW50fS9zZXJ2aWNlLyR7bmV3VmFsfS9yb2xlLXBvbGljeWApLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgIHRoaXMucm9sZVBvbGljaWVzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlLnN0YXR1cyk7CiAgICAgICAgICB0aGlzLnJvbGVQb2xpY2llcyA9IFtdOwogICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgnRmFpbCB0byBnZXQgcm9sZSBwb2xpY2llcycsIHsKICAgICAgICAgICAgdGl0bGU6IGAke2Vyci5yZXNwb25zZS5zdGF0dXN9YCwKICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICAgIHNvbGlkOiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wb2xpY2llcyA9IFtdOwogICAgICAgIHRoaXMucm9sZVBvbGljaWVzID0gW107CiAgICAgIH0KICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldE5ld1BvbGljeURhdGEoKSB7CiAgICAgIHRoaXMubmV3UG9saWN5ID0gewogICAgICAgIGVmZmVjdDogJycsCiAgICAgICAgcHJpbmNpcGFsczogW10sCiAgICAgICAgcGVybWlzc2lvbnM6IFtdLAogICAgICAgIGNvbmRpdGlvbjogJycsCiAgICAgIH07CiAgICAgIHRoaXMubmV3UG9saWN5UHJpbmNpcGFsID0gW3sKICAgICAgICBpZDogMCwKICAgICAgICB0eXBlOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgfV07CiAgICAgIHRoaXMubmV3UG9saWN5UGVybWlzc2lvbiA9IHsgYWN0aW9uOiAnJywgcmVzb3VyY2U6ICcnLCBpc1Jlc0V4cDogZmFsc2UgfTsKICAgICAgdGhpcy5uZXdQb2xpY3lWaXNpYmxlID0gZmFsc2U7CgogICAgICB0aGlzLm5ld1JvbGVQb2xpY3kgPSB7CiAgICAgICAgZWZmZWN0OiAnJywKICAgICAgICBwcmluY2lwYWxzOiBbXSwKICAgICAgICByb2xlczogW10sCiAgICAgICAgcmVzb3VyY2VzOiBbXSwKICAgICAgICBjb25kaXRpb246ICcnLAogICAgICB9OwogICAgICB0aGlzLm5ld1JvbGVQb2xpY3lWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMubmV3Um9sZVBvbGljeVByaW5jaXBhbCA9IHsKICAgICAgICB0eXBlOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgfTsKICAgICAgdGhpcy5uZXdSb2xlUG9saWN5Um9sZSA9ICcnOwogICAgICB0aGlzLm5ld1JvbGVQb2xpY3lSZXNvdXJjZSA9ICcnOwogICAgfSwKICAgIHJlZnJlc2hQb2xpY2llcygpIHsKICAgICAgdGhpcy5heGlvcy5nZXQoYCR7dGhpcy5wbXNFbmRwb2ludH0vc2VydmljZS8ke3RoaXMuc3ZjTmFtZX0vcG9saWN5YCkudGhlbigocmVzcCkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YSk7CiAgICAgICAgdGhpcy5wb2xpY2llcyA9IHJlc3AuZGF0YTsKICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgdGhpcy5wb2xpY2llcyA9IFtdOwogICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoYCR7ZXJyLm1lc3NhZ2V9YCwgewogICAgICAgICAgdGl0bGU6ICdGYWlsIHRvIGdldCBwb2xpY2llcycsCiAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgIHNvbGlkOiB0cnVlLAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZWZyZXNoUm9sZVBvbGljaWVzKCkgewogICAgICB0aGlzLmF4aW9zLmdldChgJHt0aGlzLnBtc0VuZHBvaW50fS9zZXJ2aWNlLyR7dGhpcy5zdmNOYW1lfS9yb2xlLXBvbGljeWApLnRoZW4oKHJlc3ApID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpOwogICAgICAgIHRoaXMucm9sZVBvbGljaWVzID0gcmVzcC5kYXRhOwogICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB0aGlzLnJvbGVQb2xpY2llcyA9IFtdOwogICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoYCR7ZXJyLm1lc3NhZ2V9YCwgewogICAgICAgICAgdGl0bGU6ICdGYWlsIHRvIGdldCByb2xlIHBvbGljaWVzJywKICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZFBvbGljeShwb2xpY3kpIHsKICAgICAgY29uc29sZS5sb2coJ2FkZFBvbGljeScpOwogICAgICBjb25zdCBwcmluY2lwYWxzID0gW107CiAgICAgIGNvbnN0IG9ySXQgPSBwb2xpY3kucHJpbmNpcGFscy52YWx1ZXMoKTsKICAgICAgbGV0IG9yQ3VyID0gb3JJdC5uZXh0KCk7CiAgICAgIHdoaWxlICghb3JDdXIuZG9uZSkgewogICAgICAgIGNvbnNvbGUubG9nKG9yQ3VyLnZhbHVlLmFuZFByaW5jaXBhbCk7CiAgICAgICAgY29uc3QgYW5kSXQgPSBvckN1ci52YWx1ZS5hbmRQcmluY2lwYWwudmFsdWVzKCk7CiAgICAgICAgbGV0IGFuZEN1ciA9IGFuZEl0Lm5leHQoKTsKICAgICAgICBjb25zdCBhbmRQID0gW107CiAgICAgICAgd2hpbGUgKCFhbmRDdXIuZG9uZSkgewogICAgICAgICAgYW5kUC5wdXNoKGAke2FuZEN1ci52YWx1ZS50eXBlfToke2FuZEN1ci52YWx1ZS5uYW1lfWApOwogICAgICAgICAgYW5kQ3VyID0gYW5kSXQubmV4dCgpOwogICAgICAgIH0KICAgICAgICBwcmluY2lwYWxzLnB1c2goYW5kUCk7CiAgICAgICAgb3JDdXIgPSBvckl0Lm5leHQoKTsKICAgICAgfQogICAgICBjb25zb2xlLmxvZyhwcmluY2lwYWxzKTsKICAgICAgY29uc3QgcGVybXMgPSBbXTsKICAgICAgY29uc3QgaXQgPSBwb2xpY3kucGVybWlzc2lvbnMudmFsdWVzKCk7CiAgICAgIGxldCBjdXIgPSBpdC5uZXh0KCk7CiAgICAgIHdoaWxlICghY3VyLmRvbmUpIHsKICAgICAgICBpZiAoY3VyLnZhbHVlLmlzUmVzRXhwKSB7CiAgICAgICAgICBwZXJtcy5wdXNoKHsgYWN0aW9uczogY3VyLnZhbHVlLmFjdGlvbnMsIHJlc291cmNlRXhwcmVzc2lvbjogY3VyLnZhbHVlLnJlc291cmNlIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwZXJtcy5wdXNoKHsgYWN0aW9uczogY3VyLnZhbHVlLmFjdGlvbnMsIHJlc291cmNlOiBjdXIudmFsdWUucmVzb3VyY2UgfSk7CiAgICAgICAgfQogICAgICAgIGN1ciA9IGl0Lm5leHQoKTsKICAgICAgfQoKICAgICAgdGhpcy5heGlvcy5wb3N0KGAke3RoaXMucG1zRW5kcG9pbnR9L3NlcnZpY2UvJHt0aGlzLnN2Y05hbWV9L3BvbGljeWAsCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ3BvbGljeSBkZXNjJywKICAgICAgICAgIGVmZmVjdDogcG9saWN5LmVmZmVjdCwKICAgICAgICAgIHByaW5jaXBhbHMsCiAgICAgICAgICBwZXJtaXNzaW9uczogcGVybXMsCiAgICAgICAgICBjb25kaXRpb246IHBvbGljeS5jb25kaXRpb24sCiAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgdGhpcy5yZWZyZXNoUG9saWNpZXMoKTsKICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChgJHtlcnIubWVzc2FnZX1gLCB7CiAgICAgICAgICB0aXRsZTogJ0ZhaWwgdG8gY3JlYXRlIHBvbGljeScsCiAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgIHNvbGlkOiB0cnVlLAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVQb2xpY3koaWRUb1JlbW92ZSkgewogICAgICAvLyB0aGlzLnBvbGljaWVzID0gdGhpcy5wb2xpY2llcy5maWx0ZXIoKHBvbGljeSkgPT4gcG9saWN5LmlkICE9PSBpZFRvUmVtb3ZlKTsKICAgICAgdGhpcy5heGlvcy5kZWxldGUoYCR7dGhpcy5wbXNFbmRwb2ludH0vc2VydmljZS8ke3RoaXMuc3ZjTmFtZX0vcG9saWN5LyR7aWRUb1JlbW92ZX1gKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgdGhpcy5yZWZyZXNoUG9saWNpZXMoKTsKICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChgJHtlcnIubWVzc2FnZX1gLCB7CiAgICAgICAgICAgIHRpdGxlOiAnRmFpbCB0byBkZWxldGUgcG9saWN5JywKICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICAgIHNvbGlkOiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgYWRkUm9sZVBvbGljeShyb2xlUG9saWN5KSB7CiAgICAgIGNvbnNvbGUubG9nKCdhZGRSb2xlUG9saWN5Jyk7CiAgICAgIHRoaXMuYXhpb3MucG9zdChgJHt0aGlzLnBtc0VuZHBvaW50fS9zZXJ2aWNlLyR7dGhpcy5zdmNOYW1lfS9yb2xlLXBvbGljeWAsCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ3JvbGUgcG9saWN5IGRlc2MnLAogICAgICAgICAgZWZmZWN0OiByb2xlUG9saWN5LmVmZmVjdCwKICAgICAgICAgIHByaW5jaXBhbHM6IHJvbGVQb2xpY3kucHJpbmNpcGFscywKICAgICAgICAgIHJvbGVzOiByb2xlUG9saWN5LnJvbGVzLAogICAgICAgICAgcmVzb3VyY2VzOiByb2xlUG9saWN5LnJlc291cmNlcywKICAgICAgICAgIGNvbmRpdGlvbjogcm9sZVBvbGljeS5jb25kaXRpb24sCiAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgdGhpcy5yZWZyZXNoUm9sZVBvbGljaWVzKCk7CiAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoYCR7ZXJyLm1lc3NhZ2V9YCwgewogICAgICAgICAgdGl0bGU6ICdGYWlsIHRvIGNyZWF0ZSByb2xlIHBvbGljeScsCiAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgIHNvbGlkOiB0cnVlLAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVSb2xlUG9saWN5KGlkVG9SZW1vdmUpIHsKICAgICAgLy8gdGhpcy5wb2xpY2llcyA9IHRoaXMucG9saWNpZXMuZmlsdGVyKChwb2xpY3kpID0+IHBvbGljeS5pZCAhPT0gaWRUb1JlbW92ZSk7CiAgICAgIHRoaXMuYXhpb3MuZGVsZXRlKGAke3RoaXMucG1zRW5kcG9pbnR9L3NlcnZpY2UvJHt0aGlzLnN2Y05hbWV9L3JvbGUtcG9saWN5LyR7aWRUb1JlbW92ZX1gKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgdGhpcy5yZWZyZXNoUm9sZVBvbGljaWVzKCk7CiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoYCR7ZXJyLm1lc3NhZ2V9YCwgewogICAgICAgICAgICB0aXRsZTogJ0ZhaWwgdG8gZGVsZXRlIHJvbGUgcG9saWN5JywKICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICAgIHNvbGlkOiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIGNvbnN0IHNOYW1lID0gdGhpcy4kc3RvcmUuc3RhdGUuc3ZjTmFtZTsKICAgIGlmICh0aGlzLnN2Y05hbWUgIT09ICcnKSB7CiAgICAgIHRoaXMucmVmcmVzaFBvbGljaWVzKCk7CiAgICAgIHRoaXMucmVmcmVzaFJvbGVQb2xpY2llcygpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["Policies.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Policies.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-card  no-body class=\"border-0 rounded-0  vh-100 overflow-auto\">\n  <b-card-header v-if=\"svcName !== ''\" header-bg-variant=\"light\"  class=\"border-left rounded-0\">\n      Service Name: {{svcName}}\n  </b-card-header>\n  <b-card-header v-else header-bg-variant=\"danger\" header-text-variant=\"white\"\n   class=\"border-left rounded-0\">\n      Pls select a service from left nav pane!!!\n  </b-card-header>\n  <!--<b-card-body class=\"border-left m-0 p-0\">-->\n    <b-card no-body  class=\"rounded-0 border-0 border-left\">\n    <b-tabs card>\n      <b-tab title=\"Policies\" active>\n        <b-row>\n          <b-col cols=\"10\">\n            <b-button @click=\"newPolicyVisible = !newPolicyVisible\"\n            pill class=\"mt-3 mb-3\" variant=\"outline-success\" size=\"sm\">\n              <b-icon icon=\"pencil-square\" aria-hidden=\"true\"></b-icon>\n            </b-button>\n            <b-collapse id=\"newPolicy\" v-model=\"newPolicyVisible\">\n              <NewPolicy :policy=\"newPolicy\" :andPrincipal=\"newPolicyAndPrincipal\"\n              :permission=\"newPolicyPermission\" @addPolicy=\"addPolicy\"/>\n            </b-collapse>\n          </b-col>\n          <b-col cols =\"2\">\n            <b-button @click=\"refreshPolicies\"\n             pill class=\"mt-3 mb-3\" variant=\"outline-success\" size=\"sm\">\n              <b-icon icon=\"arrow-repeat\" aria-hidden=\"true\"></b-icon>\n            </b-button>\n          </b-col>\n        </b-row>\n        <b-card>\n          <PolicyTable :policies=\"policies\" @removePolicy=\"removePolicy\"/>\n        </b-card>\n      </b-tab>\n      <b-tab title=\"Role Policies\">\n        <b-row>\n          <b-col cols=\"10\">\n            <b-button @click=\"newRolePolicyVisible = !newRolePolicyVisible\"\n            pill class=\"mt-3 mb-3\" variant=\"outline-success\" size=\"sm\">\n              <b-icon icon=\"pencil-square\" aria-hidden=\"true\"></b-icon>\n            </b-button>\n            <b-collapse id=\"newRolePolicy\" v-model=\"newRolePolicyVisible\">\n              <NewRolePolicy :rolePolicy=\"newRolePolicy\" :principal=\"newRolePolicyPrincipal\"\n                :role=\"newRolePolicyRole\" :resource=\"newRolePolicyResource\"\n                @addRolePolicy=\"addRolePolicy\"/>\n            </b-collapse>\n            </b-col>\n          <b-col cols =\"2\">\n            <b-button @click=\"refreshRolePolicies\"\n             pill class=\"mt-3 mb-3\" variant=\"outline-success\" size=\"sm\">\n              <b-icon icon=\"arrow-repeat\" aria-hidden=\"true\"></b-icon>\n            </b-button>\n          </b-col>\n        </b-row>\n        <b-card>\n          <RolePolicyTable :rolePolicies=\"rolePolicies\" @removeRolePolicy=\"removeRolePolicy\"/>\n        </b-card>\n      </b-tab>\n    </b-tabs>\n    </b-card>\n    <!--</b-card-body>-->\n  </b-card>\n</template>\n\n<script>\nimport NewPolicy from './NewPolicy.vue';\nimport PolicyTable from './PolicyTable.vue';\nimport NewRolePolicy from './NewRolePolicy.vue';\nimport RolePolicyTable from './RolePolicyTable.vue';\n\n// let nextID = 3;\nexport default {\n  name: 'Policies',\n  components: {\n    NewPolicy, PolicyTable, NewRolePolicy, RolePolicyTable,\n  },\n  data() {\n    return {\n      policies: [],\n      rolePolicies: [],\n      newPolicy: {\n        effect: '',\n        principals: [],\n        permissions: [],\n        condition: '',\n      },\n      newPolicyAndPrincipal: [{\n        id: 0,\n        type: '',\n        name: '',\n      }],\n      newPolicyPermission: {\n        action: '',\n        resource: '',\n      },\n      newPolicyVisible: false,\n\n      newRolePolicy: {\n        effect: '',\n        principals: [],\n        roles: [],\n        resources: [],\n        condition: '',\n      },\n      newRolePolicyVisible: false,\n      newRolePolicyPrincipal: {\n        type: '',\n        name: '',\n      },\n      newRolePolicyRole: '',\n      newRolePolicyResource: '',\n    };\n  },\n  computed: {\n    svcName() {\n      return this.$store.state.svcName;\n    },\n    pmsEndpoint() {\n      return this.$store.state.pmsEndpoint;\n    },\n  },\n  watch: {\n    svcName(newVal) {\n      if (newVal !== '') {\n        this.resetNewPolicyData();\n        this.axios.get(`${this.pmsEndpoint}/service/${newVal}/policy`).then((response) => {\n          console.log(response.data);\n          this.policies = response.data;\n        }).catch((err) => {\n          console.log(err);\n          console.log(err.response.data);\n          console.log(err.response.status);\n          this.policies = [];\n          this.$bvToast.toast('Fail to get policies', {\n            title: `${err.response.status}`,\n            variant: 'danger',\n            solid: true,\n          });\n        });\n        this.axios.get(`${this.pmsEndpoint}/service/${newVal}/role-policy`).then((response) => {\n          console.log(response.data);\n          this.rolePolicies = response.data;\n        }).catch((err) => {\n          console.log(err);\n          console.log(err.response.data);\n          console.log(err.response.status);\n          this.rolePolicies = [];\n          this.$bvToast.toast('Fail to get role policies', {\n            title: `${err.response.status}`,\n            variant: 'danger',\n            solid: true,\n          });\n        });\n      } else {\n        this.policies = [];\n        this.rolePolicies = [];\n      }\n    },\n  },\n  methods: {\n    resetNewPolicyData() {\n      this.newPolicy = {\n        effect: '',\n        principals: [],\n        permissions: [],\n        condition: '',\n      };\n      this.newPolicyPrincipal = [{\n        id: 0,\n        type: '',\n        name: '',\n      }];\n      this.newPolicyPermission = { action: '', resource: '', isResExp: false };\n      this.newPolicyVisible = false;\n\n      this.newRolePolicy = {\n        effect: '',\n        principals: [],\n        roles: [],\n        resources: [],\n        condition: '',\n      };\n      this.newRolePolicyVisible = false;\n      this.newRolePolicyPrincipal = {\n        type: '',\n        name: '',\n      };\n      this.newRolePolicyRole = '';\n      this.newRolePolicyResource = '';\n    },\n    refreshPolicies() {\n      this.axios.get(`${this.pmsEndpoint}/service/${this.svcName}/policy`).then((resp) => {\n        console.log(resp.data);\n        this.policies = resp.data;\n      }).catch((err) => {\n        console.log(err);\n        this.policies = [];\n        this.$bvToast.toast(`${err.message}`, {\n          title: 'Fail to get policies',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n    },\n    refreshRolePolicies() {\n      this.axios.get(`${this.pmsEndpoint}/service/${this.svcName}/role-policy`).then((resp) => {\n        console.log(resp.data);\n        this.rolePolicies = resp.data;\n      }).catch((err) => {\n        console.log(err);\n        this.rolePolicies = [];\n        this.$bvToast.toast(`${err.message}`, {\n          title: 'Fail to get role policies',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n    },\n    addPolicy(policy) {\n      console.log('addPolicy');\n      const principals = [];\n      const orIt = policy.principals.values();\n      let orCur = orIt.next();\n      while (!orCur.done) {\n        console.log(orCur.value.andPrincipal);\n        const andIt = orCur.value.andPrincipal.values();\n        let andCur = andIt.next();\n        const andP = [];\n        while (!andCur.done) {\n          andP.push(`${andCur.value.type}:${andCur.value.name}`);\n          andCur = andIt.next();\n        }\n        principals.push(andP);\n        orCur = orIt.next();\n      }\n      console.log(principals);\n      const perms = [];\n      const it = policy.permissions.values();\n      let cur = it.next();\n      while (!cur.done) {\n        if (cur.value.isResExp) {\n          perms.push({ actions: cur.value.actions, resourceExpression: cur.value.resource });\n        } else {\n          perms.push({ actions: cur.value.actions, resource: cur.value.resource });\n        }\n        cur = it.next();\n      }\n\n      this.axios.post(`${this.pmsEndpoint}/service/${this.svcName}/policy`,\n        {\n          name: 'policy desc',\n          effect: policy.effect,\n          principals,\n          permissions: perms,\n          condition: policy.condition,\n        }).then((response) => {\n        console.log(response);\n        this.refreshPolicies();\n      }).catch((err) => {\n        console.log(err);\n        this.$bvToast.toast(`${err.message}`, {\n          title: 'Fail to create policy',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n    },\n    removePolicy(idToRemove) {\n      // this.policies = this.policies.filter((policy) => policy.id !== idToRemove);\n      this.axios.delete(`${this.pmsEndpoint}/service/${this.svcName}/policy/${idToRemove}`)\n        .then((response) => {\n          console.log(response);\n          this.refreshPolicies();\n        }).catch((err) => {\n          console.log(err);\n          this.$bvToast.toast(`${err.message}`, {\n            title: 'Fail to delete policy',\n            variant: 'danger',\n            solid: true,\n          });\n        });\n    },\n    addRolePolicy(rolePolicy) {\n      console.log('addRolePolicy');\n      this.axios.post(`${this.pmsEndpoint}/service/${this.svcName}/role-policy`,\n        {\n          name: 'role policy desc',\n          effect: rolePolicy.effect,\n          principals: rolePolicy.principals,\n          roles: rolePolicy.roles,\n          resources: rolePolicy.resources,\n          condition: rolePolicy.condition,\n        }).then((response) => {\n        console.log(response);\n        this.refreshRolePolicies();\n      }).catch((err) => {\n        console.log(err);\n        this.$bvToast.toast(`${err.message}`, {\n          title: 'Fail to create role policy',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n    },\n    removeRolePolicy(idToRemove) {\n      // this.policies = this.policies.filter((policy) => policy.id !== idToRemove);\n      this.axios.delete(`${this.pmsEndpoint}/service/${this.svcName}/role-policy/${idToRemove}`)\n        .then((response) => {\n          console.log(response);\n          this.refreshRolePolicies();\n        }).catch((err) => {\n          console.log(err);\n          this.$bvToast.toast(`${err.message}`, {\n            title: 'Fail to delete role policy',\n            variant: 'danger',\n            solid: true,\n          });\n        });\n    },\n  },\n  mounted() {\n    // const sName = this.$store.state.svcName;\n    if (this.svcName !== '') {\n      this.refreshPolicies();\n      this.refreshRolePolicies();\n    }\n  },\n};\n</script>\n"]}]}