{"remainingRequest":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cyding/speedle-ui/src/components/Service.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cyding/speedle-ui/src/components/Service.vue","mtime":1596353001611},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOZXdQb2xpY3kgZnJvbSAnLi9OZXdQb2xpY3kudnVlJzsKaW1wb3J0IFBvbGljeVRhYmxlIGZyb20gJy4vUG9saWN5VGFibGUudnVlJzsKaW1wb3J0IE5ld1JvbGVQb2xpY3kgZnJvbSAnLi9OZXdSb2xlUG9saWN5LnZ1ZSc7CmltcG9ydCBSb2xlUG9saWN5VGFibGUgZnJvbSAnLi9Sb2xlUG9saWN5VGFibGUudnVlJzsKCi8vIGxldCBuZXh0SUQgPSAzOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NlcnZpY2UnLAogIGNvbXBvbmVudHM6IHsKICAgIE5ld1BvbGljeSwgUG9saWN5VGFibGUsIE5ld1JvbGVQb2xpY3ksIFJvbGVQb2xpY3lUYWJsZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwb2xpY2llczogW10sCiAgICAgIHJvbGVQb2xpY2llczogW10sCiAgICAgIG5ld1BvbGljeTogewogICAgICAgIGVmZmVjdDogJycsCiAgICAgICAgcHJpbmNpcGFsczogW10sCiAgICAgICAgcGVybWlzc2lvbnM6IFtdLAogICAgICAgIGNvbmRpdGlvbjogJycsCiAgICAgIH0sCiAgICAgIG5ld1BvbGljeUFuZFByaW5jaXBhbDogW3sKICAgICAgICBpZDogMCwKICAgICAgICB0eXBlOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgfV0sCiAgICAgIG5ld1BvbGljeVBlcm1pc3Npb246IHsKICAgICAgICBhY3Rpb246ICcnLAogICAgICAgIHJlc291cmNlOiAnJywKICAgICAgfSwKICAgICAgbmV3UG9saWN5VmlzaWJsZTogZmFsc2UsCgogICAgICBuZXdSb2xlUG9saWN5OiB7CiAgICAgICAgZWZmZWN0OiAnJywKICAgICAgICBwcmluY2lwYWxzOiBbXSwKICAgICAgICByb2xlczogW10sCiAgICAgICAgcmVzb3VyY2VzOiBbXSwKICAgICAgICBjb25kaXRpb246ICcnLAogICAgICB9LAogICAgICBuZXdSb2xlUG9saWN5VmlzaWJsZTogZmFsc2UsCiAgICAgIG5ld1JvbGVQb2xpY3lQcmluY2lwYWw6IHsKICAgICAgICB0eXBlOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgfSwKICAgICAgbmV3Um9sZVBvbGljeVJvbGU6ICcnLAogICAgICBuZXdSb2xlUG9saWN5UmVzb3VyY2U6ICcnLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzdmNOYW1lKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc3ZjTmFtZTsKICAgIH0sCiAgICBwbXNFbmRwb2ludCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnBtc0VuZHBvaW50OwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBzdmNOYW1lKG5ld1ZhbCkgewogICAgICBpZiAobmV3VmFsICE9PSAnJykgewogICAgICAgIHRoaXMucmVzZXROZXdQb2xpY3lEYXRhKCk7CiAgICAgICAgdGhpcy5heGlvcy5nZXQoYCR7dGhpcy5wbXNFbmRwb2ludH0vc2VydmljZS8ke25ld1ZhbH0vcG9saWN5YCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgdGhpcy5wb2xpY2llcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZS5zdGF0dXMpOwogICAgICAgICAgdGhpcy5wb2xpY2llcyA9IFtdOwogICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgnRmFpbCB0byBnZXQgcG9saWNpZXMnLCB7CiAgICAgICAgICAgIHRpdGxlOiBgJHtlcnIucmVzcG9uc2Uuc3RhdHVzfWAsCiAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgICBzb2xpZDogdHJ1ZSwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuYXhpb3MuZ2V0KGAke3RoaXMucG1zRW5kcG9pbnR9L3NlcnZpY2UvJHtuZXdWYWx9L3JvbGUtcG9saWN5YCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgdGhpcy5yb2xlUG9saWNpZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2Uuc3RhdHVzKTsKICAgICAgICAgIHRoaXMucm9sZVBvbGljaWVzID0gW107CiAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCdGYWlsIHRvIGdldCByb2xlIHBvbGljaWVzJywgewogICAgICAgICAgICB0aXRsZTogYCR7ZXJyLnJlc3BvbnNlLnN0YXR1c31gLAogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBvbGljaWVzID0gW107CiAgICAgICAgdGhpcy5yb2xlUG9saWNpZXMgPSBbXTsKICAgICAgfQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0TmV3UG9saWN5RGF0YSgpIHsKICAgICAgdGhpcy5uZXdQb2xpY3kgPSB7CiAgICAgICAgZWZmZWN0OiAnJywKICAgICAgICBwcmluY2lwYWxzOiBbXSwKICAgICAgICBwZXJtaXNzaW9uczogW10sCiAgICAgICAgY29uZGl0aW9uOiAnJywKICAgICAgfTsKICAgICAgdGhpcy5uZXdQb2xpY3lQcmluY2lwYWwgPSBbewogICAgICAgIGlkOiAwLAogICAgICAgIHR5cGU6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICB9XTsKICAgICAgdGhpcy5uZXdQb2xpY3lQZXJtaXNzaW9uID0geyBhY3Rpb246ICcnLCByZXNvdXJjZTogJycsIGlzUmVzRXhwOiBmYWxzZSB9OwogICAgICB0aGlzLm5ld1BvbGljeVZpc2libGUgPSBmYWxzZTsKCiAgICAgIHRoaXMubmV3Um9sZVBvbGljeSA9IHsKICAgICAgICBlZmZlY3Q6ICcnLAogICAgICAgIHByaW5jaXBhbHM6IFtdLAogICAgICAgIHJvbGVzOiBbXSwKICAgICAgICByZXNvdXJjZXM6IFtdLAogICAgICAgIGNvbmRpdGlvbjogJycsCiAgICAgIH07CiAgICAgIHRoaXMubmV3Um9sZVBvbGljeVZpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5uZXdSb2xlUG9saWN5UHJpbmNpcGFsID0gewogICAgICAgIHR5cGU6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICB9OwogICAgICB0aGlzLm5ld1JvbGVQb2xpY3lSb2xlID0gJyc7CiAgICAgIHRoaXMubmV3Um9sZVBvbGljeVJlc291cmNlID0gJyc7CiAgICB9LAogICAgcmVmcmVzaFBvbGljaWVzKCkgewogICAgICB0aGlzLmF4aW9zLmdldChgJHt0aGlzLnBtc0VuZHBvaW50fS9zZXJ2aWNlLyR7dGhpcy5zdmNOYW1lfS9wb2xpY3lgKS50aGVuKChyZXNwKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcC5kYXRhKTsKICAgICAgICB0aGlzLnBvbGljaWVzID0gcmVzcC5kYXRhOwogICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB0aGlzLnBvbGljaWVzID0gW107CiAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChgJHtlcnIubWVzc2FnZX1gLCB7CiAgICAgICAgICB0aXRsZTogJ0ZhaWwgdG8gZ2V0IHBvbGljaWVzJywKICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlZnJlc2hSb2xlUG9saWNpZXMoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KGAke3RoaXMucG1zRW5kcG9pbnR9L3NlcnZpY2UvJHt0aGlzLnN2Y05hbWV9L3JvbGUtcG9saWN5YCkudGhlbigocmVzcCkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YSk7CiAgICAgICAgdGhpcy5yb2xlUG9saWNpZXMgPSByZXNwLmRhdGE7CiAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIHRoaXMucm9sZVBvbGljaWVzID0gW107CiAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChgJHtlcnIubWVzc2FnZX1gLCB7CiAgICAgICAgICB0aXRsZTogJ0ZhaWwgdG8gZ2V0IHJvbGUgcG9saWNpZXMnLAogICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICBzb2xpZDogdHJ1ZSwKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkUG9saWN5KHBvbGljeSkgewogICAgICBjb25zb2xlLmxvZygnYWRkUG9saWN5Jyk7CiAgICAgIGNvbnN0IHByaW5jaXBhbHMgPSBbXTsKICAgICAgY29uc3Qgb3JJdCA9IHBvbGljeS5wcmluY2lwYWxzLnZhbHVlcygpOwogICAgICBsZXQgb3JDdXIgPSBvckl0Lm5leHQoKTsKICAgICAgd2hpbGUgKCFvckN1ci5kb25lKSB7CiAgICAgICAgY29uc29sZS5sb2cob3JDdXIudmFsdWUuYW5kUHJpbmNpcGFsKTsKICAgICAgICBjb25zdCBhbmRJdCA9IG9yQ3VyLnZhbHVlLmFuZFByaW5jaXBhbC52YWx1ZXMoKTsKICAgICAgICBsZXQgYW5kQ3VyID0gYW5kSXQubmV4dCgpOwogICAgICAgIGNvbnN0IGFuZFAgPSBbXTsKICAgICAgICB3aGlsZSAoIWFuZEN1ci5kb25lKSB7CiAgICAgICAgICBhbmRQLnB1c2goYCR7YW5kQ3VyLnZhbHVlLnR5cGV9OiR7YW5kQ3VyLnZhbHVlLm5hbWV9YCk7CiAgICAgICAgICBhbmRDdXIgPSBhbmRJdC5uZXh0KCk7CiAgICAgICAgfQogICAgICAgIHByaW5jaXBhbHMucHVzaChhbmRQKTsKICAgICAgICBvckN1ciA9IG9ySXQubmV4dCgpOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHByaW5jaXBhbHMpOwogICAgICBjb25zdCBwZXJtcyA9IFtdOwogICAgICBjb25zdCBpdCA9IHBvbGljeS5wZXJtaXNzaW9ucy52YWx1ZXMoKTsKICAgICAgbGV0IGN1ciA9IGl0Lm5leHQoKTsKICAgICAgd2hpbGUgKCFjdXIuZG9uZSkgewogICAgICAgIGlmIChjdXIudmFsdWUuaXNSZXNFeHApIHsKICAgICAgICAgIHBlcm1zLnB1c2goeyBhY3Rpb25zOiBjdXIudmFsdWUuYWN0aW9ucywgcmVzb3VyY2VFeHByZXNzaW9uOiBjdXIudmFsdWUucmVzb3VyY2UgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBlcm1zLnB1c2goeyBhY3Rpb25zOiBjdXIudmFsdWUuYWN0aW9ucywgcmVzb3VyY2U6IGN1ci52YWx1ZS5yZXNvdXJjZSB9KTsKICAgICAgICB9CiAgICAgICAgY3VyID0gaXQubmV4dCgpOwogICAgICB9CgogICAgICB0aGlzLmF4aW9zLnBvc3QoYCR7dGhpcy5wbXNFbmRwb2ludH0vc2VydmljZS8ke3RoaXMuc3ZjTmFtZX0vcG9saWN5YCwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAncG9saWN5IGRlc2MnLAogICAgICAgICAgZWZmZWN0OiBwb2xpY3kuZWZmZWN0LAogICAgICAgICAgcHJpbmNpcGFscywKICAgICAgICAgIHBlcm1pc3Npb25zOiBwZXJtcywKICAgICAgICAgIGNvbmRpdGlvbjogcG9saWN5LmNvbmRpdGlvbiwKICAgICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICB0aGlzLnJlZnJlc2hQb2xpY2llcygpOwogICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KGAke2Vyci5tZXNzYWdlfWAsIHsKICAgICAgICAgIHRpdGxlOiAnRmFpbCB0byBjcmVhdGUgcG9saWN5JywKICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZVBvbGljeShpZFRvUmVtb3ZlKSB7CiAgICAgIC8vIHRoaXMucG9saWNpZXMgPSB0aGlzLnBvbGljaWVzLmZpbHRlcigocG9saWN5KSA9PiBwb2xpY3kuaWQgIT09IGlkVG9SZW1vdmUpOwogICAgICB0aGlzLmF4aW9zLmRlbGV0ZShgJHt0aGlzLnBtc0VuZHBvaW50fS9zZXJ2aWNlLyR7dGhpcy5zdmNOYW1lfS9wb2xpY3kvJHtpZFRvUmVtb3ZlfWApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICB0aGlzLnJlZnJlc2hQb2xpY2llcygpOwogICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KGAke2Vyci5tZXNzYWdlfWAsIHsKICAgICAgICAgICAgdGl0bGU6ICdGYWlsIHRvIGRlbGV0ZSBwb2xpY3knLAogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICBhZGRSb2xlUG9saWN5KHJvbGVQb2xpY3kpIHsKICAgICAgY29uc29sZS5sb2coJ2FkZFJvbGVQb2xpY3knKTsKICAgICAgdGhpcy5heGlvcy5wb3N0KGAke3RoaXMucG1zRW5kcG9pbnR9L3NlcnZpY2UvJHt0aGlzLnN2Y05hbWV9L3JvbGUtcG9saWN5YCwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAncm9sZSBwb2xpY3kgZGVzYycsCiAgICAgICAgICBlZmZlY3Q6IHJvbGVQb2xpY3kuZWZmZWN0LAogICAgICAgICAgcHJpbmNpcGFsczogcm9sZVBvbGljeS5wcmluY2lwYWxzLAogICAgICAgICAgcm9sZXM6IHJvbGVQb2xpY3kucm9sZXMsCiAgICAgICAgICByZXNvdXJjZXM6IHJvbGVQb2xpY3kucmVzb3VyY2VzLAogICAgICAgICAgY29uZGl0aW9uOiByb2xlUG9saWN5LmNvbmRpdGlvbiwKICAgICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICB0aGlzLnJlZnJlc2hSb2xlUG9saWNpZXMoKTsKICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChgJHtlcnIubWVzc2FnZX1gLCB7CiAgICAgICAgICB0aXRsZTogJ0ZhaWwgdG8gY3JlYXRlIHJvbGUgcG9saWN5JywKICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZVJvbGVQb2xpY3koaWRUb1JlbW92ZSkgewogICAgICAvLyB0aGlzLnBvbGljaWVzID0gdGhpcy5wb2xpY2llcy5maWx0ZXIoKHBvbGljeSkgPT4gcG9saWN5LmlkICE9PSBpZFRvUmVtb3ZlKTsKICAgICAgdGhpcy5heGlvcy5kZWxldGUoYCR7dGhpcy5wbXNFbmRwb2ludH0vc2VydmljZS8ke3RoaXMuc3ZjTmFtZX0vcm9sZS1wb2xpY3kvJHtpZFRvUmVtb3ZlfWApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICB0aGlzLnJlZnJlc2hSb2xlUG9saWNpZXMoKTsKICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChgJHtlcnIubWVzc2FnZX1gLCB7CiAgICAgICAgICAgIHRpdGxlOiAnRmFpbCB0byBkZWxldGUgcm9sZSBwb2xpY3knLAogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgLy8gY29uc3Qgc05hbWUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5zdmNOYW1lOwogICAgaWYgKHRoaXMuc3ZjTmFtZSAhPT0gJycpIHsKICAgICAgdGhpcy5yZWZyZXNoUG9saWNpZXMoKTsKICAgICAgdGhpcy5yZWZyZXNoUm9sZVBvbGljaWVzKCk7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["Service.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Service.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-card  no-body class=\"border-0 rounded-0  vh-100 overflow-auto\">\n  <b-card-header v-if=\"svcName !== ''\" header-bg-variant=\"light\"  class=\"border-left rounded-0\">\n      Service Name: {{svcName}}\n  </b-card-header>\n  <b-card-header v-else header-bg-variant=\"danger\" header-text-variant=\"white\"\n   class=\"border-left rounded-0\">\n      Pls select a service from left nav pane!!!\n  </b-card-header>\n  <!--<b-card-body class=\"border-left m-0 p-0\">-->\n    <b-card no-body  class=\"rounded-0 border-0 border-left\">\n    <b-tabs card>\n      <b-tab title=\"Policies\" active>\n        <b-row>\n          <b-col cols=\"10\">\n            <b-button @click=\"newPolicyVisible = !newPolicyVisible\"\n            pill class=\"mt-3 mb-3\" variant=\"outline-success\" size=\"sm\">\n              <b-icon icon=\"pencil-square\" aria-hidden=\"true\"></b-icon>\n            </b-button>\n          </b-col>\n          <b-col cols =\"2\">\n            <b-button @click=\"refreshPolicies\"\n             pill class=\"mt-3 mb-3\" variant=\"outline-success\" size=\"sm\">\n              <b-icon icon=\"arrow-repeat\" aria-hidden=\"true\"></b-icon>\n            </b-button>\n          </b-col>\n        </b-row>\n        <b-collapse id=\"newPolicy\" v-model=\"newPolicyVisible\">\n          <NewPolicy :policy=\"newPolicy\" :andPrincipal=\"newPolicyAndPrincipal\"\n          :permission=\"newPolicyPermission\" @addPolicy=\"addPolicy\"/>\n        </b-collapse>\n        <b-card>\n          <PolicyTable :policies=\"policies\" @removePolicy=\"removePolicy\"/>\n        </b-card>\n      </b-tab>\n      <b-tab title=\"Role Policies\">\n        <b-row>\n          <b-col cols=\"10\">\n            <b-button @click=\"newRolePolicyVisible = !newRolePolicyVisible\"\n            pill class=\"mt-3 mb-3\" variant=\"outline-success\" size=\"sm\">\n              <b-icon icon=\"pencil-square\" aria-hidden=\"true\"></b-icon>\n            </b-button>\n          </b-col>\n          <b-col cols =\"2\">\n            <b-button @click=\"refreshRolePolicies\"\n             pill class=\"mt-3 mb-3\" variant=\"outline-success\" size=\"sm\">\n              <b-icon icon=\"arrow-repeat\" aria-hidden=\"true\"></b-icon>\n            </b-button>\n          </b-col>\n        </b-row>\n        <b-collapse id=\"newRolePolicy\" v-model=\"newRolePolicyVisible\">\n              <NewRolePolicy :rolePolicy=\"newRolePolicy\" :principal=\"newRolePolicyPrincipal\"\n                :role=\"newRolePolicyRole\" :resource=\"newRolePolicyResource\"\n                @addRolePolicy=\"addRolePolicy\"/>\n        </b-collapse>\n        <b-card>\n          <RolePolicyTable :rolePolicies=\"rolePolicies\" @removeRolePolicy=\"removeRolePolicy\"/>\n        </b-card>\n      </b-tab>\n    </b-tabs>\n    </b-card>\n    <!--</b-card-body>-->\n  </b-card>\n</template>\n\n<script>\nimport NewPolicy from './NewPolicy.vue';\nimport PolicyTable from './PolicyTable.vue';\nimport NewRolePolicy from './NewRolePolicy.vue';\nimport RolePolicyTable from './RolePolicyTable.vue';\n\n// let nextID = 3;\nexport default {\n  name: 'Service',\n  components: {\n    NewPolicy, PolicyTable, NewRolePolicy, RolePolicyTable,\n  },\n  data() {\n    return {\n      policies: [],\n      rolePolicies: [],\n      newPolicy: {\n        effect: '',\n        principals: [],\n        permissions: [],\n        condition: '',\n      },\n      newPolicyAndPrincipal: [{\n        id: 0,\n        type: '',\n        name: '',\n      }],\n      newPolicyPermission: {\n        action: '',\n        resource: '',\n      },\n      newPolicyVisible: false,\n\n      newRolePolicy: {\n        effect: '',\n        principals: [],\n        roles: [],\n        resources: [],\n        condition: '',\n      },\n      newRolePolicyVisible: false,\n      newRolePolicyPrincipal: {\n        type: '',\n        name: '',\n      },\n      newRolePolicyRole: '',\n      newRolePolicyResource: '',\n    };\n  },\n  computed: {\n    svcName() {\n      return this.$store.state.svcName;\n    },\n    pmsEndpoint() {\n      return this.$store.state.pmsEndpoint;\n    },\n  },\n  watch: {\n    svcName(newVal) {\n      if (newVal !== '') {\n        this.resetNewPolicyData();\n        this.axios.get(`${this.pmsEndpoint}/service/${newVal}/policy`).then((response) => {\n          console.log(response.data);\n          this.policies = response.data;\n        }).catch((err) => {\n          console.log(err);\n          console.log(err.response.data);\n          console.log(err.response.status);\n          this.policies = [];\n          this.$bvToast.toast('Fail to get policies', {\n            title: `${err.response.status}`,\n            variant: 'danger',\n            solid: true,\n          });\n        });\n        this.axios.get(`${this.pmsEndpoint}/service/${newVal}/role-policy`).then((response) => {\n          console.log(response.data);\n          this.rolePolicies = response.data;\n        }).catch((err) => {\n          console.log(err);\n          console.log(err.response.data);\n          console.log(err.response.status);\n          this.rolePolicies = [];\n          this.$bvToast.toast('Fail to get role policies', {\n            title: `${err.response.status}`,\n            variant: 'danger',\n            solid: true,\n          });\n        });\n      } else {\n        this.policies = [];\n        this.rolePolicies = [];\n      }\n    },\n  },\n  methods: {\n    resetNewPolicyData() {\n      this.newPolicy = {\n        effect: '',\n        principals: [],\n        permissions: [],\n        condition: '',\n      };\n      this.newPolicyPrincipal = [{\n        id: 0,\n        type: '',\n        name: '',\n      }];\n      this.newPolicyPermission = { action: '', resource: '', isResExp: false };\n      this.newPolicyVisible = false;\n\n      this.newRolePolicy = {\n        effect: '',\n        principals: [],\n        roles: [],\n        resources: [],\n        condition: '',\n      };\n      this.newRolePolicyVisible = false;\n      this.newRolePolicyPrincipal = {\n        type: '',\n        name: '',\n      };\n      this.newRolePolicyRole = '';\n      this.newRolePolicyResource = '';\n    },\n    refreshPolicies() {\n      this.axios.get(`${this.pmsEndpoint}/service/${this.svcName}/policy`).then((resp) => {\n        console.log(resp.data);\n        this.policies = resp.data;\n      }).catch((err) => {\n        console.log(err);\n        this.policies = [];\n        this.$bvToast.toast(`${err.message}`, {\n          title: 'Fail to get policies',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n    },\n    refreshRolePolicies() {\n      this.axios.get(`${this.pmsEndpoint}/service/${this.svcName}/role-policy`).then((resp) => {\n        console.log(resp.data);\n        this.rolePolicies = resp.data;\n      }).catch((err) => {\n        console.log(err);\n        this.rolePolicies = [];\n        this.$bvToast.toast(`${err.message}`, {\n          title: 'Fail to get role policies',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n    },\n    addPolicy(policy) {\n      console.log('addPolicy');\n      const principals = [];\n      const orIt = policy.principals.values();\n      let orCur = orIt.next();\n      while (!orCur.done) {\n        console.log(orCur.value.andPrincipal);\n        const andIt = orCur.value.andPrincipal.values();\n        let andCur = andIt.next();\n        const andP = [];\n        while (!andCur.done) {\n          andP.push(`${andCur.value.type}:${andCur.value.name}`);\n          andCur = andIt.next();\n        }\n        principals.push(andP);\n        orCur = orIt.next();\n      }\n      console.log(principals);\n      const perms = [];\n      const it = policy.permissions.values();\n      let cur = it.next();\n      while (!cur.done) {\n        if (cur.value.isResExp) {\n          perms.push({ actions: cur.value.actions, resourceExpression: cur.value.resource });\n        } else {\n          perms.push({ actions: cur.value.actions, resource: cur.value.resource });\n        }\n        cur = it.next();\n      }\n\n      this.axios.post(`${this.pmsEndpoint}/service/${this.svcName}/policy`,\n        {\n          name: 'policy desc',\n          effect: policy.effect,\n          principals,\n          permissions: perms,\n          condition: policy.condition,\n        }).then((response) => {\n        console.log(response);\n        this.refreshPolicies();\n      }).catch((err) => {\n        console.log(err);\n        this.$bvToast.toast(`${err.message}`, {\n          title: 'Fail to create policy',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n    },\n    removePolicy(idToRemove) {\n      // this.policies = this.policies.filter((policy) => policy.id !== idToRemove);\n      this.axios.delete(`${this.pmsEndpoint}/service/${this.svcName}/policy/${idToRemove}`)\n        .then((response) => {\n          console.log(response);\n          this.refreshPolicies();\n        }).catch((err) => {\n          console.log(err);\n          this.$bvToast.toast(`${err.message}`, {\n            title: 'Fail to delete policy',\n            variant: 'danger',\n            solid: true,\n          });\n        });\n    },\n    addRolePolicy(rolePolicy) {\n      console.log('addRolePolicy');\n      this.axios.post(`${this.pmsEndpoint}/service/${this.svcName}/role-policy`,\n        {\n          name: 'role policy desc',\n          effect: rolePolicy.effect,\n          principals: rolePolicy.principals,\n          roles: rolePolicy.roles,\n          resources: rolePolicy.resources,\n          condition: rolePolicy.condition,\n        }).then((response) => {\n        console.log(response);\n        this.refreshRolePolicies();\n      }).catch((err) => {\n        console.log(err);\n        this.$bvToast.toast(`${err.message}`, {\n          title: 'Fail to create role policy',\n          variant: 'danger',\n          solid: true,\n        });\n      });\n    },\n    removeRolePolicy(idToRemove) {\n      // this.policies = this.policies.filter((policy) => policy.id !== idToRemove);\n      this.axios.delete(`${this.pmsEndpoint}/service/${this.svcName}/role-policy/${idToRemove}`)\n        .then((response) => {\n          console.log(response);\n          this.refreshRolePolicies();\n        }).catch((err) => {\n          console.log(err);\n          this.$bvToast.toast(`${err.message}`, {\n            title: 'Fail to delete role policy',\n            variant: 'danger',\n            solid: true,\n          });\n        });\n    },\n  },\n  mounted() {\n    // const sName = this.$store.state.svcName;\n    if (this.svcName !== '') {\n      this.refreshPolicies();\n      this.refreshRolePolicies();\n    }\n  },\n};\n</script>\n"]}]}