{"remainingRequest":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cyding/speedle-ui/src/components/PolicyTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cyding/speedle-ui/src/components/PolicyTable.vue","mtime":1595662102332},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1BvbGljeVRhYmxlJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmllbGRzOiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnZWZmZWN0JywKICAgICAgICAgIGxhYmVsOiAnRWZmZWN0JywKICAgICAgICAgIGZvcm1hdHRlcjogKHZhbHVlKSA9PiB2YWx1ZS50b1VwcGVyQ2FzZSgpLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAncHJpbmNpcGFscycsCiAgICAgICAgICBsYWJlbDogJ1ByaW5jaXBhbHMnLAogICAgICAgICAgLy8gZm9ybWF0dGVyOiAncHJpbmNpcGFsc1RvU3RyaW5nJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogJ3Blcm1pc3Npb25zJywKICAgICAgICAgIGxhYmVsOiAnUGVybWlzc2lvbnMnLAogICAgICAgICAgZm9ybWF0dGVyOiAncGVybWlzc2lvbnNUb1N0cmluZycsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICdjb25kaXRpb24nLAogICAgICAgICAgbGFiZWw6ICdDb25kaXRpb24nLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAnb3BlcmF0aW9uJywKICAgICAgICB9LAogICAgICBdLAogICAgICBwb2xpY2llczogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAxLAogICAgICAgICAgZWZmZWN0OiAnZ3JhbnQnLAogICAgICAgICAgcHJpbmNpcGFsczogW3sgdHlwZTogJ3VzZXInLCBuYW1lOiAndXNlcjEnIH1dLAogICAgICAgICAgcGVybWlzc2lvbnM6IFt7IGFjdGlvbnM6IFsncmVhZCcsICd3cml0ZSddLCByZXNvdXJjZTogJ2Jvb2sxJyB9XSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAyLAogICAgICAgICAgZWZmZWN0OiAnZ3JhbnQnLAogICAgICAgICAgcHJpbmNpcGFsczogW3sgdHlwZTogJ3VzZXInLCBuYW1lOiAndXNlcjEnIH0sIHsgdHlwZTogJ3JvbGUnLCBuYW1lOiAncm9sZTEnIH1dLAogICAgICAgICAgcGVybWlzc2lvbnM6IFt7IGFjdGlvbnM6IFsncmVhZCddLCByZXNvdXJjZTogJ2Jvb2sxJyB9XSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAzLAogICAgICAgICAgZWZmZWN0OiAnZ3JhbnQnLAogICAgICAgICAgcHJpbmNpcGFsczogW3sgdHlwZTogJ3VzZXInLCBuYW1lOiAndXNlcjEnIH1dLAogICAgICAgICAgcGVybWlzc2lvbnM6IFt7IGFjdGlvbnM6IFsncmVhZCddLCByZXNvdXJjZTogJ2Jvb2sxJyB9LCB7IGFjdGlvbnM6IFsnd3JpdGUnXSwgcmVzb3VyY2U6ICdib29rMScgfV0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogNCwKICAgICAgICAgIGVmZmVjdDogJ2dyYW50JywKICAgICAgICAgIHByaW5jaXBhbHM6IFt7IHR5cGU6ICd1c2VyJywgbmFtZTogJ3VzZXIxJyB9XSwKICAgICAgICAgIHBlcm1pc3Npb25zOiBbeyBhY3Rpb25zOiBbJ3JlYWQnXSwgcmVzb3VyY2U6ICdib29rMScgfSwgeyBhY3Rpb25zOiBbJ3dyaXRlJ10sIHJlc291cmNlOiAnYm9vazEnIH1dLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6IDUsCiAgICAgICAgICBlZmZlY3Q6ICdncmFudCcsCiAgICAgICAgICBwcmluY2lwYWxzOiBbeyB0eXBlOiAndXNlcicsIG5hbWU6ICd1c2VyMScgfV0sCiAgICAgICAgICBwZXJtaXNzaW9uczogW3sgYWN0aW9uczogWydyZWFkJ10sIHJlc291cmNlOiAnYm9vazEnIH0sIHsgYWN0aW9uczogWyd3cml0ZSddLCByZXNvdXJjZTogJ2Jvb2sxJyB9XSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiA2LAogICAgICAgICAgZWZmZWN0OiAnZ3JhbnQnLAogICAgICAgICAgcHJpbmNpcGFsczogW3sgdHlwZTogJ3VzZXInLCBuYW1lOiAndXNlcjEnIH1dLAogICAgICAgICAgcGVybWlzc2lvbnM6IFt7IGFjdGlvbnM6IFsncmVhZCddLCByZXNvdXJjZTogJ2Jvb2sxJyB9LCB7IGFjdGlvbnM6IFsnd3JpdGUnXSwgcmVzb3VyY2U6ICdib29rMScgfV0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogNywKICAgICAgICAgIGVmZmVjdDogJ2dyYW50JywKICAgICAgICAgIHByaW5jaXBhbHM6IFt7IHR5cGU6ICd1c2VyJywgbmFtZTogJ3VzZXIxJyB9XSwKICAgICAgICAgIHBlcm1pc3Npb25zOiBbeyBhY3Rpb25zOiBbJ3JlYWQnXSwgcmVzb3VyY2U6ICdib29rMScgfSwgeyBhY3Rpb25zOiBbJ3dyaXRlJ10sIHJlc291cmNlOiAnYm9vazEnIH1dLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcHJpbmNpcGFsc1RvU3RyaW5nKHZhbHVlKSB7CiAgICAgIGxldCByZXMgPSAnJzsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4CiAgICAgIGZvciAoY29uc3QgcCBvZiB2YWx1ZSkgewogICAgICAgIHJlcyArPSBgJHtwLnR5cGV9OiR7cC5uYW1lfWA7CiAgICAgICAgLy8gcmVzLgogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9LAogICAgcGVybWlzc2lvbnNUb1N0cmluZyh2YWx1ZSkgewogICAgICBjb25zdCByZXMgPSBbXTsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4CiAgICAgIGZvciAoY29uc3QgcCBvZiB2YWx1ZSkgewogICAgICAgIGxldCBhY3RzID0gJyc7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4CiAgICAgICAgZm9yIChjb25zdCBhIG9mIHAuYWN0aW9ucykgewogICAgICAgICAgaWYgKGFjdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBhY3RzICs9ICcsJzsKICAgICAgICAgIH0KICAgICAgICAgIGFjdHMgKz0gYTsKICAgICAgICB9CiAgICAgICAgcmVzLnB1c2goeyBhY3Rpb25zOiBhY3RzLCByZXNvdXJjZTogcC5yZXNvdXJjZSB9KTsKICAgICAgICAvLyByZXMgKz0gYCR7cC5hY3Rpb259OiR7cC5yZXNvdXJjZX1gOwogICAgICAgIC8vIHJlcy4KICAgICAgfQogICAgICByZXR1cm4gcmVzOwogICAgfSwKICAgIHJlbW92ZVBvbGljeShpZFRvUmVtb3ZlKSB7CiAgICAgIHRoaXMucG9saWNpZXMgPSB0aGlzLnBvbGljaWVzLmZpbHRlcigocG9saWN5KSA9PiBwb2xpY3kuaWQgIT09IGlkVG9SZW1vdmUpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["PolicyTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PolicyTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <b-table hover small responsive head-variant=\"light\"\n   :fields=\"fields\" :items=\"policies\">\n    <template v-slot:cell(operation)=\"data\">\n      <b-button pill variant=\"outline-danger\" size=\"sm\"\n        @click=\"removePolicy(data.item.id)\">\n      <b-icon icon=\"trash\" aria-hidden=\"true\"></b-icon>\n      </b-button>\n    </template>\n    <template v-slot:cell(principals)=\"data\">\n      <ul class=\"list-unstyled\">\n        <li v-for=\"principal in data.value\" :key=\"principal.type\">\n          {{ principal.type }} : {{ principal.name }}\n        </li>\n      </ul>\n    </template>\n    <template v-slot:cell(permissions)=\"data\">\n      <ul class=\"list-unstyled\">\n        <li v-for=\"permission in data.value\" :key=\"permission.resource\">\n          {{ permission.actions }} : {{ permission.resource }}\n        </li>\n      </ul>\n    </template>\n  </b-table>\n</div>\n</template>\n\n<script>\n\nexport default {\n  name: 'PolicyTable',\n  data() {\n    return {\n      fields: [\n        {\n          key: 'effect',\n          label: 'Effect',\n          formatter: (value) => value.toUpperCase(),\n        },\n        {\n          key: 'principals',\n          label: 'Principals',\n          // formatter: 'principalsToString',\n        },\n        {\n          key: 'permissions',\n          label: 'Permissions',\n          formatter: 'permissionsToString',\n        },\n        {\n          key: 'condition',\n          label: 'Condition',\n        },\n        {\n          key: 'operation',\n        },\n      ],\n      policies: [\n        {\n          id: 1,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }],\n          permissions: [{ actions: ['read', 'write'], resource: 'book1' }],\n        },\n        {\n          id: 2,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }, { type: 'role', name: 'role1' }],\n          permissions: [{ actions: ['read'], resource: 'book1' }],\n        },\n        {\n          id: 3,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }],\n          permissions: [{ actions: ['read'], resource: 'book1' }, { actions: ['write'], resource: 'book1' }],\n        },\n        {\n          id: 4,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }],\n          permissions: [{ actions: ['read'], resource: 'book1' }, { actions: ['write'], resource: 'book1' }],\n        },\n        {\n          id: 5,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }],\n          permissions: [{ actions: ['read'], resource: 'book1' }, { actions: ['write'], resource: 'book1' }],\n        },\n        {\n          id: 6,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }],\n          permissions: [{ actions: ['read'], resource: 'book1' }, { actions: ['write'], resource: 'book1' }],\n        },\n        {\n          id: 7,\n          effect: 'grant',\n          principals: [{ type: 'user', name: 'user1' }],\n          permissions: [{ actions: ['read'], resource: 'book1' }, { actions: ['write'], resource: 'book1' }],\n        },\n      ],\n    };\n  },\n  methods: {\n    principalsToString(value) {\n      let res = '';\n      // eslint-disable-next-line no-restricted-syntax\n      for (const p of value) {\n        res += `${p.type}:${p.name}`;\n        // res.\n      }\n      return res;\n    },\n    permissionsToString(value) {\n      const res = [];\n      // eslint-disable-next-line no-restricted-syntax\n      for (const p of value) {\n        let acts = '';\n        // eslint-disable-next-line no-restricted-syntax\n        for (const a of p.actions) {\n          if (acts.length > 0) {\n            acts += ',';\n          }\n          acts += a;\n        }\n        res.push({ actions: acts, resource: p.resource });\n        // res += `${p.action}:${p.resource}`;\n        // res.\n      }\n      return res;\n    },\n    removePolicy(idToRemove) {\n      this.policies = this.policies.filter((policy) => policy.id !== idToRemove);\n    },\n  },\n};\n</script>\n"]}]}