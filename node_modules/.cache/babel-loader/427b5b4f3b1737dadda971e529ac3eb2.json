{"remainingRequest":"/home/cyding/speedle-ui/node_modules/babel-loader/lib/index.js!/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cyding/speedle-ui/src/components/PolicyTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cyding/speedle-ui/src/components/PolicyTable.vue","mtime":1596252959448},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cyding/speedle-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2N5ZGluZy9zcGVlZGxlLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQb2xpY3lUYWJsZScsCiAgcHJvcHM6IHsKICAgIHBvbGljaWVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpZWxkczogW3sKICAgICAgICBrZXk6ICdlZmZlY3QnLAogICAgICAgIGxhYmVsOiAnRWZmZWN0JywKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uIGZvcm1hdHRlcih2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAncHJpbmNpcGFscycsCiAgICAgICAgbGFiZWw6ICdQcmluY2lwYWxzJywKICAgICAgICBmb3JtYXR0ZXI6ICdwcmluY2lwYWxzVG9TdHJpbmcnCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdwZXJtaXNzaW9ucycsCiAgICAgICAgbGFiZWw6ICdQZXJtaXNzaW9ucycsCiAgICAgICAgZm9ybWF0dGVyOiAncGVybWlzc2lvbnNUb1N0cmluZycKICAgICAgfSwgewogICAgICAgIGtleTogJ2NvbmRpdGlvbicsCiAgICAgICAgbGFiZWw6ICdDb25kaXRpb24nCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdvcGVyYXRpb24nCiAgICAgIH1dCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcHJpbmNpcGFsc1RvU3RyaW5nOiBmdW5jdGlvbiBwcmluY2lwYWxzVG9TdHJpbmcodmFsdWUpIHsKICAgICAgdmFyIG9yUHMgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4CgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodmFsdWUpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgb3JQID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICB2YXIgYW5kUHMgPSAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4CgogICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvclApLAogICAgICAgICAgICAgIF9zdGVwMjsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBhbmRQID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoYW5kUHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBhbmRQcyA9IGFuZFA7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFuZFBzICs9ICIgJiAiLmNvbmNhdChhbmRQKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgfQoKICAgICAgICAgIG9yUHMucHVzaChhbmRQcyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvclBzOwogICAgfSwKICAgIHBlcm1pc3Npb25zVG9TdHJpbmc6IGZ1bmN0aW9uIHBlcm1pc3Npb25zVG9TdHJpbmcodmFsdWUpIHsKICAgICAgdmFyIHJlcyA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgKCiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodmFsdWUpLAogICAgICAgICAgX3N0ZXAzOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHAgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICB2YXIgYWN0cyA9ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgKCiAgICAgICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHAuYWN0aW9ucyksCiAgICAgICAgICAgICAgX3N0ZXA0OwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIGEgPSBfc3RlcDQudmFsdWU7CgogICAgICAgICAgICAgIGlmIChhY3RzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGFjdHMgKz0gJywnOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYWN0cyArPSBhOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocC5yZXNvdXJjZUV4cHJlc3Npb24gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXMucHVzaCh7CiAgICAgICAgICAgICAgYWN0aW9uczogYWN0cywKICAgICAgICAgICAgICByZXNvdXJjZTogcC5yZXNvdXJjZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcy5wdXNoKHsKICAgICAgICAgICAgICBhY3Rpb25zOiBhY3RzLAogICAgICAgICAgICAgIHJlc291cmNlOiAiZXhwcjoiLmNvbmNhdChwLnJlc291cmNlRXhwcmVzc2lvbikKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH0KICB9Cn07"},{"version":3,"sources":["PolicyTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,CACA;AACA,QAAA,GAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,QAFA;AAGA,QAAA,SAAA,EAAA,mBAAA,KAAA;AAAA,iBAAA,KAAA,CAAA,WAAA,EAAA;AAAA;AAHA,OADA,EAMA;AACA,QAAA,GAAA,EAAA,YADA;AAEA,QAAA,KAAA,EAAA,YAFA;AAGA,QAAA,SAAA,EAAA;AAHA,OANA,EAWA;AACA,QAAA,GAAA,EAAA,aADA;AAEA,QAAA,KAAA,EAAA,aAFA;AAGA,QAAA,SAAA,EAAA;AAHA,OAXA,EAgBA;AACA,QAAA,GAAA,EAAA,WADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAhBA,EAoBA;AACA,QAAA,GAAA,EAAA;AADA,OApBA;AADA,KAAA;AA0BA,GAnCA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,kBADA,8BACA,KADA,EACA;AACA,UAAA,IAAA,GAAA,EAAA,CADA,CAEA;;AAFA,iDAGA,KAHA;AAAA;;AAAA;AAGA,4DAAA;AAAA,cAAA,GAAA;AACA,cAAA,KAAA,GAAA,EAAA,CADA,CAEA;;AAFA,sDAGA,GAHA;AAAA;;AAAA;AAGA,mEAAA;AAAA,kBAAA,IAAA;;AACA,kBAAA,KAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,gBAAA,KAAA,GAAA,IAAA;AACA,eAFA,MAEA;AACA,gBAAA,KAAA,iBAAA,IAAA,CAAA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;;AAUA,UAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;;AAeA,aAAA,IAAA;AACA,KAjBA;AAkBA,IAAA,mBAlBA,+BAkBA,KAlBA,EAkBA;AACA,UAAA,GAAA,GAAA,EAAA,CADA,CAEA;;AAFA,kDAGA,KAHA;AAAA;;AAAA;AAGA,+DAAA;AAAA,cAAA,CAAA;AACA,cAAA,IAAA,GAAA,EAAA,CADA,CAEA;;AAFA,sDAGA,CAAA,CAAA,OAHA;AAAA;;AAAA;AAGA,mEAAA;AAAA,kBAAA,CAAA;;AACA,kBAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,gBAAA,IAAA,IAAA,GAAA;AACA;;AACA,cAAA,IAAA,IAAA,CAAA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;;AASA,cAAA,CAAA,CAAA,kBAAA,KAAA,SAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA;AAAA,cAAA,OAAA,EAAA,IAAA;AAAA,cAAA,QAAA,EAAA,CAAA,CAAA;AAAA,aAAA;AACA,WAFA,MAEA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA;AAAA,cAAA,OAAA,EAAA,IAAA;AAAA,cAAA,QAAA,iBAAA,CAAA,CAAA,kBAAA;AAAA,aAAA;AACA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;;AAkBA,aAAA,GAAA;AACA;AArCA;AApCA,CAAA","sourcesContent":["<template>\n<div>\n  <b-table hover small responsive head-variant=\"light\"\n   :fields=\"fields\" :items=\"policies\">\n    <template v-slot:cell(operation)=\"data\">\n      <b-button pill variant=\"outline-danger\" size=\"sm\"\n        @click=\"$emit('removePolicy',data.item.id)\">\n      <b-icon icon=\"trash\" aria-hidden=\"true\"></b-icon>\n      </b-button>\n    </template>\n    <template v-slot:cell(principals)=\"data\">\n      <ul class=\"list-unstyled\">\n        <li v-for=\"(principal,index) in data.value\" :key=\"index\">\n          {{ principal }}\n        </li>\n      </ul>\n    </template>\n    <template v-slot:cell(permissions)=\"data\">\n      <ul class=\"list-unstyled\">\n        <li v-for=\"(permission,index) in data.value\" :key=\"index\">\n          {{ permission.actions }} {{ permission.resource }}\n        </li>\n      </ul>\n    </template>\n  </b-table>\n</div>\n</template>\n\n<script>\n\nexport default {\n  name: 'PolicyTable',\n  props: {\n    policies: {\n      type: Array,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      fields: [\n        {\n          key: 'effect',\n          label: 'Effect',\n          formatter: (value) => value.toUpperCase(),\n        },\n        {\n          key: 'principals',\n          label: 'Principals',\n          formatter: 'principalsToString',\n        },\n        {\n          key: 'permissions',\n          label: 'Permissions',\n          formatter: 'permissionsToString',\n        },\n        {\n          key: 'condition',\n          label: 'Condition',\n        },\n        {\n          key: 'operation',\n        },\n      ],\n    };\n  },\n  methods: {\n    principalsToString(value) {\n      const orPs = [];\n      // eslint-disable-next-line no-restricted-syntax\n      for (const orP of value) {\n        let andPs = '';\n        // eslint-disable-next-line no-restricted-syntax\n        for (const andP of orP) {\n          if (andPs.length === 0) {\n            andPs = andP;\n          } else {\n            andPs += ` & ${andP}`;\n          }\n        }\n        orPs.push(andPs);\n      }\n      return orPs;\n    },\n    permissionsToString(value) {\n      const res = [];\n      // eslint-disable-next-line no-restricted-syntax\n      for (const p of value) {\n        let acts = '';\n        // eslint-disable-next-line no-restricted-syntax\n        for (const a of p.actions) {\n          if (acts.length > 0) {\n            acts += ',';\n          }\n          acts += a;\n        }\n        if (p.resourceExpression === undefined) {\n          res.push({ actions: acts, resource: p.resource });\n        } else {\n          res.push({ actions: acts, resource: `expr:${p.resourceExpression}` });\n        }\n      }\n      return res;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}